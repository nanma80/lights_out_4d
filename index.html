<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Lights Out 4D</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
  <link rel="icon" type="image/png" sizes="192x192" href="favicon-192.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <meta property="og:title" content="Lights Out 4D">
  <meta property="og:description" content="A puzzle game on stereographic projections of 4D polytopes">
  <meta property="og:image" content="https://nanma80.github.io/lights_out_4d/og-image.png">
  <meta property="og:url" content="https://nanma80.github.io/lights_out_4d/">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="canvas-container"></div>

  <div id="hint-overlay">
    <div id="hint-title">Lights Out 4D</div>
    <div id="hint-text">Tap a sphere to toggle the rings</div>
    <div id="hint-subtext">Drag to orbit · Pinch to rotate in 4D</div>
  </div>

  <div id="ui-overlay">
    <button class="ui-btn zoom-btn" id="btn-zoom-in">+</button>
    <button class="ui-btn zoom-btn" id="btn-zoom-out">−</button>
    <button class="ui-btn" id="btn-scramble">Scramble</button>
    <button class="ui-btn" id="btn-reset">Reset</button>
    <select class="ui-btn" id="polytope-select">
      <option value="16-cell">16-cell</option>
      <option value="24-cell">24-cell</option>
      <option value="600-cell">600-cell</option>
    </select>
    <div class="ui-label">Moves</div>
    <div id="move-count">0</div>
  </div>

  <button class="ui-btn" id="btn-debug-bundle" style="display:none;position:fixed;top:10px;right:10px;z-index:100">Bundle</button>

  <div id="author">Nan Ma · 2026</div>
  <div id="debug-overlay" style="display:none;position:fixed;top:0;left:0;color:lime;background:rgba(0,0,0,0.7);font:11px monospace;padding:4px 8px;z-index:9999;pointer-events:none;white-space:pre"></div>

  <div id="win-overlay">
    <div id="win-message"></div>
    <div id="win-subtitle"></div>
    <div id="win-moves"></div>
    <button class="ui-btn" id="win-scramble">Scramble Again</button>
  </div>

  <script>
    window.onerror = function(msg, src, line, col, err) {
      var d = document.getElementById('debug-overlay');
      if (d && d.style.display !== 'none') d.textContent = 'ERR: ' + msg + '\n' + src + ':' + line;
    };
    window.addEventListener('unhandledrejection', function(e) {
      var d = document.getElementById('debug-overlay');
      if (d && d.style.display !== 'none') d.textContent = 'REJ: ' + e.reason;
    });
  </script>
  <script type="module" src="src/main.js?v=10"></script>
</body>
</html>
